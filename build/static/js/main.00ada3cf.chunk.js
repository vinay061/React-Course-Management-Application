(this["webpackJsonpps-flux"]=this["webpackJsonpps-flux"]||[]).push([[0],{54:function(e,t,r){"use strict";r.r(t);r(33);var n=r(2),c=r.n(n),s=r(12),a=r(14),o=r(15),i=r(19),u=r(18),j=r(0),l=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"About"}),Object(j.jsx)("p",{children:"This app uses React"})]})}}]),r}(c.a.Component),h=r(4);var b=function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Plural Sight Administration"}),Object(j.jsx)("p",{children:"React,Flux, and React Router for ultra-responsive web apps"}),Object(j.jsx)(h.b,{to:"about",className:"btn btn-primary",children:"About"})]})};var d=function(){var e={color:"orange"};return Object(j.jsxs)("div",{children:[Object(j.jsx)(h.c,{activeStyle:e,exact:!0,to:"/",children:"Home"})," | ",Object(j.jsx)(h.c,{activeStyle:e,to:"/about",children:"About"})," | ",Object(j.jsx)(h.c,{activeStyle:e,to:"/courses",children:"Courses"})," | "]})},O=r(11);var x=function(e){return Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"\xa0"}),Object(j.jsx)("th",{children:"Title"}),Object(j.jsx)("th",{children:"Author ID"}),Object(j.jsx)("th",{children:"Category"})]})}),Object(j.jsx)("tbody",{children:e.courses.map((function(t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:Object(j.jsx)("button",{className:"btn btn-outline-danger",onClick:function(){e.deleteCourse(t.id)},children:"DELETE"})}),Object(j.jsx)("td",{children:Object(j.jsx)(h.b,{to:"/course/"+t.slug,children:t.title})}),Object(j.jsx)("td",{children:t.authorId}),Object(j.jsx)("td",{children:t.category})]},t.id)}))})]})},f=r(28),p="CREATE_COURSE",g="UPDATE_COURSE",m="DELETE_COURSE",v="LOAD_COURSE",C=new(r(29).Dispatcher),y="change",S=[],E=new(function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"addChangeListener",value:function(e){this.on(y,e)}},{key:"removeChangeListener",value:function(e){this.on(y,e)}},{key:"emitChange",value:function(){this.emit(y)}},{key:"getCourses",value:function(){return S}},{key:"getCoursesBySlug",value:function(e){return S.find((function(t){return t.slug===e}))}}]),r}(f.EventEmitter));C.register((function(e){switch(e.actionType){case m:S=S.filter((function(t){return t.id!==parseInt(e.id,10)})),E.emitChange();break;case p:S.push(e.course),E.emitChange();break;case g:S=S.map((function(t){return t.id===e.course.id?e.course:t})),E.emitChange();break;case v:S=e.courses,E.emitChange()}}));var T=E,k=r(10),N=r(22),A=r.n(N),I=r(30);function R(e){return _.apply(this,arguments)}function _(){return(_=Object(I.a)(A.a.mark((function e(t){var r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:if(400!==t.status){e.next=7;break}return e.next=5,t.text();case 5:throw r=e.sent,new Error(r);case 7:throw new Error("Network response was not ok.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){throw console.error("API call failed. "+e),e}var D=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL+"/courses/";function P(e){return function(e){return fetch(D+(e.id||""),{method:e.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(Object(k.a)(Object(k.a)({},e),{},{authorId:parseInt(e.authorId,10)}))}).then(R).catch(w)}(e).then((function(t){C.dispatch({actionType:e.id?g:p,course:t})}))}function L(){return fetch(D).then(R).catch(w).then((function(e){C.dispatch({actionType:v,courses:e})}))}function U(e){return(t=e,fetch(D+t,{method:"DELETE"}).then(R).catch(w)).then((function(){C.dispatch({actionType:m,id:e})}));var t}var F=function(){var e=Object(n.useState)(T.getCourses()),t=Object(O.a)(e,2),r=t[0],c=t[1];function s(){c(T.getCourses())}return Object(n.useEffect)((function(){return T.addChangeListener(s),0===T.getCourses().length&&L(),function(){return T.removeChangeListener(s)}}),[]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"Courses"}),Object(j.jsx)(h.b,{className:"btn btn-primary",to:"/course",children:"ADD COURSES"}),Object(j.jsx)(x,{courses:r,deleteCourse:U})]})},H=r(9);var B=function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Page Not Found"}),Object(j.jsx)("p",{children:"Refresh later"}),Object(j.jsx)(h.b,{to:"/",children:"Home"})]})},q=r(16);function J(e){var t="form-group";return e.error.length>0&&(t+=" has-error"),Object(j.jsxs)("div",{className:t,children:[Object(j.jsx)("label",{htmlFor:e.id,children:e.label}),Object(j.jsx)("div",{className:"field",children:Object(j.jsx)("input",{id:e.id,type:"text",onChange:e.onChange,name:e.name,value:e.value,className:"form-control"})}),e.error&&Object(j.jsx)("div",{className:"alert alert-danger",children:e.error})]})}J.defaultProps={error:""};var K=J;var W=function(e){return Object(j.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(j.jsx)(K,{id:"title",label:"Title",onChange:e.onChange,name:"title",error:e.errors.title,value:e.course.title||""}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"author",children:"Author"}),Object(j.jsx)("div",{className:"field",children:Object(j.jsxs)("select",{id:"author",name:"authorId",onChange:e.onChange,value:e.course.authorId,className:"form-control",children:[Object(j.jsx)("option",{value:""}),Object(j.jsx)("option",{value:"1",children:"Cory House"}),Object(j.jsx)("option",{value:"2",children:"Scott Allen"})]})}),e.errors.authorId&&Object(j.jsx)("div",{className:"alert alert-danger",children:e.errors.authorId})]}),Object(j.jsx)(K,{id:"category",label:"Category",name:"category",onChange:e.onChange,error:e.errors.category,value:e.course.category}),Object(j.jsx)("input",{type:"submit",value:"Save",className:"btn btn-primary"})]})},M=r(17),V=function(e){var t=Object(n.useState)({}),r=Object(O.a)(t,2),c=r[0],s=r[1],a=Object(n.useState)(T.getCourses()),o=Object(O.a)(a,2),i=o[0],u=o[1],l=Object(n.useState)({id:null,slug:"",title:"",authorId:null,category:""}),h=Object(O.a)(l,2),b=h[0],d=h[1];function x(){u(T.getCourses())}return Object(n.useEffect)((function(){T.addChangeListener(x);var t=e.match.params.slug;return 0===i.length?L():t&&d(T.getCoursesBySlug(t)),function(){return T.removeChangeListener(x)}}),[i.length,e.match.params.slug]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"Manage Courses"}),Object(j.jsx)(W,{errors:c,course:b,onChange:function(e){var t=Object(k.a)(Object(k.a)({},b),{},Object(q.a)({},e.target.name,e.target.value));d(t)},onSubmit:function(t){t.preventDefault(),function(){var e={};return b.title||(e.title="Title is required"),b.authorId||(e.authorId="Author Id is required"),b.category||(e.category="Category is required"),s(e),0===Object.keys(e).length}()&&P(b).then((function(){e.history.push("/courses"),M.b.success("Course Saved")}))}})]})};r(53);var z=function(){return Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)(d,{}),Object(j.jsx)(M.a,{autoClose:3e3,hideProgressBar:!0}),Object(j.jsxs)(H.d,{children:[Object(j.jsx)(H.b,{path:"/",exact:!0,component:b}),Object(j.jsx)(H.b,{path:"/courses",component:F}),Object(j.jsx)(H.b,{path:"/about",component:l}),Object(j.jsx)(H.b,{path:"/course/:slug",component:V}),Object(j.jsx)(H.b,{path:"/course",component:V}),Object(j.jsx)(H.a,{from:"/about-to",to:"/about"}),Object(j.jsx)(H.b,{component:B})]})]})};Object(s.render)(Object(j.jsx)(h.a,{children:Object(j.jsx)(z,{})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.00ada3cf.chunk.js.map